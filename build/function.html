<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Function</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">  
  <style>
    body { 
        text-align: center; 
        font-size: 11.5vh;
        font-family: "Poppins", sans-serif;
        font-weight: 900;
        font-style: normal;
        text-align: center;
        color: #7f58af;
    }

    h1 { 
        margin-top: 50px; 
    }

    input {
        box-shadow: inset #7f58af 0 0 0 2px;
        border: 0;
        font-family: "Poppins", sans-serif;
        background: rgba(0, 0, 0, 0);
        appearance: none;
        width: 40vw;
        position: relative;
        border-radius: 3px;
        padding: 9px 12px;
        line-height: 1.4;
        color: #7f58af;
        font-size: 16px;
        font-weight: 400;
        height: 40px;
        transition: all .2s ease;
        display: block;
        margin-right: auto;
        margin-left: auto;
        :hover{
            box-shadow: 0 0 0 0 #fff inset, #7f58af 0 0 0 2px;
        }
        :focus{
            background: #fff;
            outline: 0;
            box-shadow: 0 0 0 0 #fff inset, #7f58af 0 0 0 3px;
        }   
    }

    button {
        display: inline-block;
        outline: 0;
        border: 0;
        cursor: pointer;
        background-color: white;
        border-radius: 4px;
        padding: 8px 16px;
        font-size: 16px;
        font-weight: 600;
        color: #7f58af;
        border: 1px solid #7f58af;
        line-height: 26px;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>
<body>
  <p id="problem"></p>
  <input type="number" id="answer" autofocus placeholder="Enter your answer">
  <a href="menu.html"><button id="back">Back</button></a>

  <script>
    let score = 0;
    const audio = new Audio('ding.mp3');

    if (localStorage.getItem('functionLifetimeScore') === null) {
        localStorage.setItem('functionLifetimeScore', '0');
    }

    function generateProblem() {
      const num1 = Math.floor(Math.random() * 12) + 1;
      const num2 = Math.floor(Math.random() * 12) + 1;
      $("#problem").text(`${num1} x ${num2} = ?`);
    }

    function checkAnswer() {
      const answer = parseInt($("#answer").val());
      const numbers = $("#problem").text().split(" x ");
      const num1 = parseInt(numbers[0]);
      const num2 = parseInt(numbers[1]);
      const correctAnswer = num1 * num2;

      if (answer === correctAnswer) {
        score++;
        let lifetimeScore = localStorage.getItem("functionLifetimeScore");
        lifetimeScore = lifetimeScore ? parseInt(lifetimeScore) : 0;
        lifetimeScore++;
        localStorage.setItem("functionLifetimeScore", lifetimeScore);
        $("input").val("");
        generateProblem();
        if (localStorage.getItem('volume') === '1') {
            audio.play();
        }
      }
    }

    $("#answer").keyup(checkAnswer);
    generateProblem();
  </script>
</body>
</html>
